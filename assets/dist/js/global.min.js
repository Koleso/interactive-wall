"use strict";var promise=new RSVP.Promise(function(a,b){a(value),b(error)}),app={w:null,itemW:null,initialCount:null,bulk:null,rendered:[],lastRowFirst:!1,init:function(){this.w=window.innerWidth,this.itemW=350,this.initialCount=parseInt(this.w/this.itemW),app.loadBulk("bulk.json",function(){app.loadWall()})},loadBulk:function(a,b){$.getJSON(a,function(a){app.bulk=$.map(a.statuses,function(a,b){return[a]}),b()})},loadWall:function(){for(var a=0;a<2*this.initialCount;a++)app.loadPost(app.getPost(),!0,a);setTimeout(function(){document.getElementById("d-loading").classList.add("d-fade");var a=document.querySelectorAll("#d-row--top li"),b=document.querySelectorAll("#d-row--bottom li");Array.prototype.forEach.call(a,function(a,b){setTimeout(function(){a.classList.add("d-show")},50*b)}),setTimeout(function(){Array.prototype.forEach.call(b,function(a,b){setTimeout(function(){a.classList.add("d-show")},50*b)})},50)},3e3),setTimeout(function(){app.loadNextItem()},3e3)},loadNextItem:function(){setTimeout(function(){app.loadPost(app.getPost(),!1),app.getBulkLength()>0&&app.loadNextItem()},1e3*Math.floor(4*Math.random()+2))},loadPost:function(a){var b=arguments.length<=1||void 0===arguments[1]?!1:arguments[1],c=[a.user.profile_image_url];a.image_url&&c.push(a.image_url),app.preloadImages(c,function(){app.renderPost(a,b)})},renderPost:function(a){var b=arguments.length<=1||void 0===arguments[1]?!1:arguments[1],c=$(app.getPostTemplate(a,b));if(app.lastRowFirst?$("#d-row--bottom").prepend(c):$("#d-row--top").prepend(c),app.lastRowFirst=!app.lastRowFirst,!b&&(setTimeout(function(){c.addClass("d-show")},16),app.rendered.unshift(c)>2*this.initialCount+4)){var d=app.rendered.pop();d.remove()}return c},getPostTemplate:function(a){var b=arguments.length<=1||void 0===arguments[1]?!1:arguments[1];return"instagram"===a.network?app.getInstagram(a,b):"twitter"===a.network?app.getTweet(a,b):void 0},getTweet:function(a){var b=arguments.length<=1||void 0===arguments[1]?!1:arguments[1],c="anim-flip-left";return b&&(c="anim-flip"),'<li><div class="d-card d-card--twitter '+c+'"><p class="d-card-title">Twitter</p><p class="d-card-message">'+a.text.replace(/(^|\s)(#[a-z\d-]+)/gi,"$1<span class='d-hash'>$2</span>")+'</p><div class="d-card-user"><img src="'+a.user.profile_image_url+'" alt="'+a.user.screen_name+'" class="d-card-userPhoto"><p class="d-card-userName">@'+a.user.screen_name+'</p><p class="d-card-likeCount">'+a.favorite_count+"</p></div></div></li>"},getInstagram:function(a){var b=arguments.length<=1||void 0===arguments[1]?!1:arguments[1],c="anim-flip-left";return b&&(c="anim-flip"),'<li><div class="d-card d-card--instagram '+c+'"><img src="'+a.image_url+'" alt="" class="d-card-photo"><div class="d-card-user"><img src="'+a.user.profile_image_url+'" alt="'+a.user.screen_name+'" class="d-card-userPhoto"><p class="d-card-userName">@'+a.user.screen_name+'</p><p class="d-card-likeCount">'+a.favorite_count+"</p></div></div></li>"},getPost:function(){return app.bulk.shift()},getBulkLength:function(){return app.bulk.length},preloadImages:function(a,b){var c=a.length;0===c&&b();for(var d=0,e=0;c>e;e++){var f=new Image;f.src=a[e],f.onload=function(){d++,d===c&&b()}}}};app.init();