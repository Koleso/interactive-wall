"use strict";var app={bulk:null,rendered:[],w:null,itemW:null,initialCount:null,lastRowFirst:!1,init:function(){this.w=window.innerWidth,this.itemW=350,this.initialCount=parseInt(this.w/this.itemW),app.loadBulk()},loadWall:function(){setTimeout(function(){$("#d-row--top .d-card").each(function(a){var b=this;setTimeout(function(){$(b).parent("li").addClass("d-show")},200*a)})},0),setTimeout(function(){$("#d-row--bottom .d-card").each(function(a){var b=this;setTimeout(function(){$(b).parent("li").addClass("d-show")},200*a)})},50),setTimeout(function(){app.loadNextItem()},1e3)},loadNextItem:function(){setTimeout(function(){app.loadPosts(!1),app.getBulkLength()>0&&app.loadNextItem()},1e3*Math.floor(4*Math.random()+2))},loadBulk:function(){$.getJSON("bulk.json",function(a){app.bulk=app.convertBulk(a),app.loadPosts(!0)})},getBulkLength:function(){return app.bulk.length},convertBulk:function(a){return $.map(a.statuses,function(a,b){return[a]})},loadPosts:function(){var a=arguments.length<=0||void 0===arguments[0]?!1:arguments[0];if(a){for(var b=0;b<this.initialCount;b++)app.renderPost(a),app.renderPost(a);app.loadWall()}else app.renderPost(a)},getTweet:function(a){var b=arguments.length<=1||void 0===arguments[1]?!1:arguments[1],c="anim-flip-left";return b&&(c="anim-flip"),'<li><div class="d-card d-card--twitter '+c+'"><p class="d-card-title">Twitter</p><p class="d-card-message">'+a.text.replace(/(^|\s)(#[a-z\d-]+)/gi,"$1<span class='d-hash'>$2</span>")+'</p><div class="d-card-user"><img src="'+a.user.profile_image_url+'" alt="'+a.user.screen_name+'" class="d-card-userPhoto"><p class="d-card-userName">@'+a.user.screen_name+'</p><p class="d-card-likeCount">'+a.favorite_count+"</p></div></div></li>"},getInstagram:function(a){var b=arguments.length<=1||void 0===arguments[1]?!1:arguments[1],c="anim-flip-left";return b&&(c="anim-flip"),'<li><div class="d-card d-card--instagram '+c+'"><img src="'+a.image_url+'" alt="" class="d-card-userPhoto"><div class="d-card-user"><img src="'+a.user.profile_image_url+'" alt="'+a.user.screen_name+'" class="d-card-userPhoto"><p class="d-card-userName">@'+a.user.screen_name+'</p><p class="d-card-likeCount">'+a.favorite_count+"</p></div></div></li>"},getPostTemplate:function(a){var b=arguments.length<=1||void 0===arguments[1]?!1:arguments[1];return"instagram"===a.network?app.getInstagram(a,b):"twitter"===a.network?app.getTweet(a,b):void 0},renderPost:function(){var a=arguments.length<=0||void 0===arguments[0]?!1:arguments[0],b=$(app.getPostTemplate(app.getPost(),a));if(app.lastRowFirst?$("#d-row--bottom").prepend(b):$("#d-row--top").prepend(b),app.lastRowFirst=!app.lastRowFirst,a||setTimeout(function(){b.addClass("d-show")},16),app.rendered.unshift(b)>2*this.initialCount+4){console.log(app.rendered.length);var c=app.rendered.pop();c.remove()}return b},getPost:function(){return app.bulk.shift()}};app.init();