"use strict";var app={w:null,itemW:null,initialCount:null,bulk:null,rendered:[],lastRowFirst:!1,init:function(){this.w=window.innerWidth,this.itemW=350,this.initialCount=parseInt(this.w/this.itemW),app.loadBulk("bulk.json")},loadBulk:function(a){var b=new XMLHttpRequest;b.open("GET",a,!0),b.onload=function(){var a=JSON.parse(b.responseText);for(var c in a)a.hasOwnProperty(c)&&(app.bulk=a[c],app.loadWall())},b.send()},loadWall:function(){for(var a=0;a<2*this.initialCount;a++)app.loadPost(app.getPost(),!0,a);setTimeout(function(){document.getElementById("d-loading").classList.add("d-fade");var a=document.querySelectorAll("#d-row--top li"),b=document.querySelectorAll("#d-row--bottom li");Array.prototype.forEach.call(a,function(a,b){setTimeout(function(){a.classList.add("d-show")},50*b)}),setTimeout(function(){Array.prototype.forEach.call(b,function(a,b){setTimeout(function(){a.classList.add("d-show")},50*b)})},50)},3e3),setTimeout(function(){app.loadNextItem()},3e3)},loadNextItem:function(){setTimeout(function(){app.loadPost(app.getPost(),!1),app.getBulkLength()>0&&app.loadNextItem()},1e3*Math.floor(4*Math.random()+2))},loadPost:function(a){var b=arguments.length<=1||void 0===arguments[1]?!1:arguments[1],c=[a.user.profile_image_url];a.image_url&&c.push(a.image_url),app.preloadImages(c,function(){app.renderPost(a,b)})},renderPost:function(a){var b=arguments.length<=1||void 0===arguments[1]?!1:arguments[1],c=app.getPostTemplate(a,b);if(console.log(c),app.lastRowFirst)var d=document.getElementById("d-row--bottom");else var d=document.getElementById("d-row--top");if(d.insertBefore(c,d.firstChild),app.lastRowFirst=!app.lastRowFirst,!b&&(setTimeout(function(){c.classList.add("d-show")},16),app.rendered.unshift(c)>2*this.initialCount+4)){var e=app.rendered.pop();e.parentNode.removeChild(e)}return c},getPostTemplate:function(a){var b=arguments.length<=1||void 0===arguments[1]?!1:arguments[1];return"instagram"===a.network?app.getInstagram(a,b):"twitter"===a.network?app.getTweet(a,b):void 0},getTweet:function(a){var b=arguments.length<=1||void 0===arguments[1]?!1:arguments[1],c="anim-flip-left";b&&(c="anim-flip");var d=document.createElement("li");return d.innerHTML='<div class="d-card d-card--twitter '+c+'"><p class="d-card-title">Twitter</p><p class="d-card-message">'+a.text.replace(/(^|\s)(#[a-z\d-]+)/gi,"$1<span class='d-hash'>$2</span>")+'</p><div class="d-card-user"><img src="'+a.user.profile_image_url+'" alt="'+a.user.screen_name+'" class="d-card-userPhoto"><p class="d-card-userName">@'+a.user.screen_name+'</p><p class="d-card-likeCount">'+a.favorite_count+"</p></div></div>",d},getInstagram:function(a){var b=arguments.length<=1||void 0===arguments[1]?!1:arguments[1],c="anim-flip-left";b&&(c="anim-flip");var d=document.createElement("li");return d.innerHTML='<div class="d-card d-card--instagram '+c+'"><img src="'+a.image_url+'" alt="" class="d-card-photo"><div class="d-card-user"><img src="'+a.user.profile_image_url+'" alt="'+a.user.screen_name+'" class="d-card-userPhoto"><p class="d-card-userName">@'+a.user.screen_name+'</p><p class="d-card-likeCount">'+a.favorite_count+"</p></div></div>",d},getPost:function(){return app.bulk.shift()},getBulkLength:function(){return app.bulk.length},preloadImages:function(a,b){var c=a.length;0===c&&b();for(var d=0,e=0;c>e;e++){var f=new Image;f.src=a[e],f.onload=function(){d++,d===c&&b()}}}};app.init();