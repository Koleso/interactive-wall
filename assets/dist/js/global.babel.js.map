{"version":3,"sources":["../../src/js/global.js"],"names":[],"mappings":"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","file":"global.babel.js","sourcesContent":["/*\n*\n* Project:    Interactive wall\n* Author:     David Kolinek - www.davidkolinek.cz\n* E-mail:     david.kolinek@gmail.com\n*\n* open /Applications/Google\\ Chrome\\ Canary.app --args --allow-file-access-from-files/Applications/Google\\ Chrome\\ Canary.app/Contents/MacOS/Google\\ Chrome\\ Canary --args --allow-file-access-from-files\n* \n*/\n\nvar app = {\n  // Cons\n  w: null,\n  itemW: null,\n  initialCount: null,\n\n  // Data\n  bulk: null,\n  rendered: [],\n  lastRowFirst: false,\n\n  init: function () {\n    this.w = window.innerWidth;\n    this.itemW = 350;\n    this.initialCount = parseInt(this.w / this.itemW);\n\n    app.loadBulk(\"bulk.json\", function () {\n      app.loadWall();\n    });\n  },\n\n  loadBulk: function (data, callback) {\n    $.getJSON(data, function(json) {\n      app.bulk = $.map(json.statuses, function(value, index) {\n        return [value];\n      });\n      callback();\n    });\n  },\n\n  loadWall: function () {\n    // Initial load\n    for (var i = 0; i < this.initialCount*2; i++) {\n      app.loadPost(app.getPost(), true, i);\n    }\n\n    // Load new posts\n    setTimeout(function() {\n      app.loadNextItem();\n    }, 1000);\n  },\n\n  loadNextItem: function () {\n    // Random generator for displaying new posts\n    setTimeout(function() {\n      app.loadPost(app.getPost(), false); // Load only 1 item\n      if(app.getBulkLength() > 0) {\n        app.loadNextItem();\n      }\n    }, Math.floor(Math.random()*4+2)*1000);\n  },\n\n  loadPost: function (item, initial = false) {\n    var images = [item.user.profile_image_url];\n    if(item.image_url) {\n      images.push(item.image_url);\n    }\n\n    app.preloadImages(images, function () {\n      app.renderPost(item, initial);\n    });\n  },\n\n  renderPost: function (item, initial = false) {\n    var $newPost = $(app.getPostTemplate(item, initial));\n    if(app.lastRowFirst) {\n      $(\"#d-row--bottom\").prepend($newPost);\n    } else {\n      $(\"#d-row--top\").prepend($newPost);\n    }\n    app.lastRowFirst = !app.lastRowFirst;\n\n    setTimeout(function () {\n      $newPost.addClass(\"d-show\");\n    }, 16);\n\n    if(app.rendered.unshift($newPost) > this.initialCount*2+4) {\n      var $last = app.rendered.pop();\n      $last.remove();\n    };\n\n    return $newPost;\n  },\n\n  getPostTemplate: function (item, initial = false) {\n    if(item.network === \"instagram\") {\n      return app.getInstagram(item, initial);\n    } else if(item.network === \"twitter\") {\n      return app.getTweet(item, initial);\n    }\n  },\n\n  getTweet: function (item, initial = false) {\n    var anim = 'anim-flip-left';\n    if(initial) anim = 'anim-flip';\n\n    return '<li>' +\n          '<div class=\"d-card d-card--twitter '+anim+'\">' +\n            '<p class=\"d-card-title\">Twitter</p>' +\n            '<p class=\"d-card-message\">'+item.text.replace(/(^|\\s)(#[a-z\\d-]+)/ig, \"$1<span class='d-hash'>$2</span>\")+'</p>' +\n            '<div class=\"d-card-user\">' +\n              '<img src=\"'+item.user.profile_image_url+'\" alt=\"'+item.user.screen_name+'\" class=\"d-card-userPhoto\">' +\n              '<p class=\"d-card-userName\">@'+item.user.screen_name+'</p>' +\n              '<p class=\"d-card-likeCount\">'+item.favorite_count+'</p>' +\n            '</div>' +\n          '</div>' +\n        '</li>';\n  },\n\n  getInstagram: function (item, initial = false) {\n    var anim = 'anim-flip-left';\n    if(initial) anim = 'anim-flip';\n\n    return '<li>' +\n          '<div class=\"d-card d-card--instagram '+anim+'\">' +\n            '<img src=\"'+item.image_url+'\" alt=\"\" class=\"d-card-photo\">' +\n            '<div class=\"d-card-user\">' +\n              '<img src=\"'+item.user.profile_image_url+'\" alt=\"'+item.user.screen_name+'\" class=\"d-card-userPhoto\">' +\n              '<p class=\"d-card-userName\">@'+item.user.screen_name+'</p>' +\n              '<p class=\"d-card-likeCount\">'+item.favorite_count+'</p>' +\n            '</div>' +\n          '</div>' +\n        '</li>';\n  },\n\n  getPost: function () {\n    return app.bulk.shift();\n  },\n\n  getBulkLength: function () {\n    return app.bulk.length;\n  },\n\n  preloadImages: function (images, callback) {\n    var count = images.length;\n    if(count === 0) {\n        callback();\n    }\n\n    var loaded = 0;\n    for (var i = 0; i < count; i++) {\n      var img = new Image(); \n      img.src = images[i];\n      img.onload = function () {\n        loaded++;\n        if(loaded === count) {\n          callback();\n        }\n      }\n    }\n  }\n};\n\napp.init();"]}