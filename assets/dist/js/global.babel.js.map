{"version":3,"sources":["../../src/js/global.js"],"names":[],"mappings":"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","file":"global.babel.js","sourcesContent":["/*\n*\n* Project:    Interactive wall\n* Author:     David Kolinek - www.davidkolinek.cz\n* E-mail:     david.kolinek@gmail.com\n*\n* open /Applications/Google\\ Chrome\\ Canary.app --args --allow-file-access-from-files/Applications/Google\\ Chrome\\ Canary.app/Contents/MacOS/Google\\ Chrome\\ Canary --args --allow-file-access-from-files\n* \n*/\n\nvar app = {\n  bulk: null,\n  rendered: [],\n  w: null,\n  itemW: null,\n  initialCount: null,\n  lastRowFirst: false,\n\n  init: function () {\n    this.w = window.innerWidth;\n    this.itemW = 350;\n    this.initialCount = parseInt(this.w / this.itemW);\n    app.loadBulk();\n  },\n\n  loadWall: function () {\n    setTimeout(function() {\n      $(\"#d-row--top .d-card\").each(function(index) {\n        var card = this;\n\n        setTimeout(function () {\n          $(card).parent('li').addClass(\"d-show\");\n        },  index*200);\n      });\n    }, 0);\n\n    setTimeout(function() {\n      $(\"#d-row--bottom .d-card\").each(function(index) {\n        var card = this;\n        \n        setTimeout(function () {\n          $(card).parent('li').addClass(\"d-show\");\n        },  index*200);\n      });\n    }, 50);\n\n    setTimeout(function() {\n      app.loadNextItem();\n    }, 1000);\n\n  },\n\n  loadNextItem: function () {\n    // Random generator for displaying new posts\n    setTimeout(function() {\n      app.loadPosts(false);\n      if(app.getBulkLength() > 0) {\n        app.loadNextItem();\n      }\n    }, Math.floor(Math.random()*4+2)*1000);\n  },\n\n  loadBulk: function () {\n    $.getJSON(\"bulk.json\", function(json) {\n      app.bulk = app.convertBulk(json);\n      app.loadPosts(true);\n    });\n  },\n\n  getBulkLength: function () {\n    return app.bulk.length;\n  },\n\n  convertBulk: function (json) {\n    return $.map(json.statuses, function(value, index) {\n      return [value];\n    });\n  },\n\n  loadPosts: function (initial = false) {\n    if(initial) {\n      // Initial state, fill whole wall\n      for (var i = 0; i < this.initialCount; i++) {\n        app.renderPost(initial);\n        app.renderPost(initial);\n      };\n      app.loadWall();\n\n    } else {\n      // Load one new post\n      app.renderPost(initial);\n    }\n  },\n\n  getTweet: function (item, initial = false) {\n    var anim = 'anim-flip-left';\n    if(initial) anim = 'anim-flip';\n\n    return '<li>' +\n          '<div class=\"d-card d-card--twitter '+anim+'\">' +\n            '<p class=\"d-card-title\">Twitter</p>' +\n            '<p class=\"d-card-message\">'+item.text.replace(/(^|\\s)(#[a-z\\d-]+)/ig, \"$1<span class='d-hash'>$2</span>\")+'</p>' +\n            '<div class=\"d-card-user\">' +\n              '<img src=\"'+item.user.profile_image_url+'\" alt=\"'+item.user.screen_name+'\" class=\"d-card-userPhoto\">' +\n              '<p class=\"d-card-userName\">@'+item.user.screen_name+'</p>' +\n              '<p class=\"d-card-likeCount\">'+item.favorite_count+'</p>' +\n            '</div>' +\n          '</div>' +\n        '</li>';\n  },\n\n  getInstagram: function (item, initial = false) {\n    var anim = 'anim-flip-left';\n    if(initial) anim = 'anim-flip';\n\n    return '<li>' +\n          '<div class=\"d-card d-card--instagram '+anim+'\">' +\n            '<img src=\"'+item.image_url+'\" alt=\"\" class=\"d-card-userPhoto\">' +\n            '<div class=\"d-card-user\">' +\n              '<img src=\"'+item.user.profile_image_url+'\" alt=\"'+item.user.screen_name+'\" class=\"d-card-userPhoto\">' +\n              '<p class=\"d-card-userName\">@'+item.user.screen_name+'</p>' +\n              '<p class=\"d-card-likeCount\">'+item.favorite_count+'</p>' +\n            '</div>' +\n          '</div>' +\n        '</li>';\n  },\n\n  getPostTemplate: function (item, initial = false) {\n    if(item.network === \"instagram\") {\n      return app.getInstagram(item, initial);\n    } else if(item.network === \"twitter\") {\n      return app.getTweet(item, initial);\n    }\n  },\n\n  renderPost: function (initial = false) {\n    var $newPost = $(app.getPostTemplate(app.getPost(), initial));\n    if(app.lastRowFirst) {\n      $(\"#d-row--bottom\").prepend($newPost);\n    } else {\n      $(\"#d-row--top\").prepend($newPost);\n    }\n    app.lastRowFirst = !app.lastRowFirst;\n\n    if(!initial) {\n      setTimeout(function () {\n        $newPost.addClass(\"d-show\");\n      }, 16);\n    }\n\n    if(app.rendered.unshift($newPost) > this.initialCount*2+4) {\n      console.log(app.rendered.length);\n      var $last = app.rendered.pop();\n      $last.remove();\n    };\n\n    return $newPost;\n  },\n\n  getPost: function () {\n    return app.bulk.shift();\n  }\n};\n\napp.init();"]}