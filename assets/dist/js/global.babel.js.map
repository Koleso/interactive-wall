{"version":3,"sources":["../../src/js/global.js"],"names":[],"mappings":"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","file":"global.babel.js","sourcesContent":["/*\n*\n* Project:    Interactive wall\n* Author:     David Kolinek - www.davidkolinek.cz\n* E-mail:     david.kolinek@gmail.com\n*\n* open /Applications/Google\\ Chrome\\ Canary.app --args --allow-file-access-from-files/Applications/Google\\ Chrome\\ Canary.app/Contents/MacOS/Google\\ Chrome\\ Canary --args --allow-file-access-from-files\n* \n*/\n\nvar app = {\n  // Cons\n  w: null,\n  itemW: null,\n  initialCount: null,\n\n  // Data\n  bulk: null,\n  rendered: [],\n  lastRowFirst: false,\n\n  init: function () {\n    this.w = window.innerWidth;\n    this.itemW = 350;\n    this.initialCount = parseInt(this.w / this.itemW);\n\n    app.loadBulk(\"bulk.json\");\n  },\n\n  loadBulk: function (file) {\n    var request = new XMLHttpRequest();\n    request.open('GET', file, true);\n\n    request.onload = function() {\n      var data = JSON.parse(request.responseText);\n      for(var key in data) {\n        if(data.hasOwnProperty(key)) {\n            app.bulk = data[key];\n            app.loadWall();\n        }\n      }\n    };\n    request.send();\n  },\n\n  loadWall: function () {\n    // Initial load\n    for (var i = 0; i < this.initialCount*2; i++) {\n      app.loadPost(app.getPost(), true, i);\n    }\n\n    // Fake loading\n    setTimeout(function() {\n      var loading = document.getElementById('d-loading');\n      loading.classList.add('d-fade');\n      setTimeout(function(){\n        loading.parentNode.removeChild(loading);\n      }, 500);\n\n      var elementsTop = document.querySelectorAll(\"#d-row--top li\");\n      var elementsBottom = document.querySelectorAll(\"#d-row--bottom li\");\n\n      Array.prototype.forEach.call(elementsTop, function(el, i){\n        setTimeout(function(){\n          el.classList.add('d-show');\n        }, i*50);\n      });\n\n      setTimeout(function () {\n        Array.prototype.forEach.call(elementsBottom, function(el, i){\n          setTimeout(function(){\n            el.classList.add('d-show');\n          }, i*50);\n        });\n      }, 50);\n    }, 3000);\n\n    // Load new posts\n    setTimeout(function() {\n      app.loadNextItem();\n    }, 3000);\n  },\n\n  loadNextItem: function () {\n    // Random generator for displaying new posts\n    setTimeout(function() {\n      app.loadPost(app.getPost(), false); // Load only 1 item\n      if(app.getBulkLength() > 0) {\n        app.loadNextItem();\n      }\n    }, Math.floor(Math.random()*4+2)*1000);\n  },\n\n  loadPost: function (item, initial = false) {\n    var images = [item.user.profile_image_url];\n    if(item.image_url) {\n      images.push(item.image_url);\n    }\n\n    app.preloadImages(images, function () {\n      app.renderPost(item, initial);\n    });\n  },\n\n  renderPost: function (item, initial = false) {\n    var newPost = app.getPostTemplate(item, initial);\n    console.log(newPost);\n    if(app.lastRowFirst) {\n      var parent = document.getElementById(\"d-row--bottom\");\n    } else {\n      var parent = document.getElementById(\"d-row--top\");\n    }\n    parent.insertBefore(newPost, parent.firstChild);\n    app.lastRowFirst = !app.lastRowFirst;\n\n    if(!initial) {\n      setTimeout(function () {\n        newPost.classList.add(\"d-show\");\n      }, 16);\n\n      if(app.rendered.unshift(newPost) > this.initialCount*2+4) {\n        var last = app.rendered.pop();\n        last.parentNode.removeChild(last);\n      };\n    }\n\n    return newPost;\n  },\n\n  getPostTemplate: function (item, initial = false) {\n    if(item.network === \"instagram\") {\n      return app.getInstagram(item, initial);\n    } else if(item.network === \"twitter\") {\n      return app.getTweet(item, initial);\n    }\n  },\n\n  getTweet: function (item, initial = false) {\n    var anim = 'anim-flip-left';\n    if(initial) anim = 'anim-flip';\n\n    var node = document.createElement('li');\n    node.innerHTML = '<div class=\"d-card d-card--twitter '+anim+'\">' +\n            '<p class=\"d-card-title\">Twitter</p>' +\n            '<p class=\"d-card-message\">'+item.text.replace(/(^|\\s)(#[a-z\\d-]+)/ig, \"$1<span class='d-hash'>$2</span>\")+'</p>' +\n            '<div class=\"d-card-user\">' +\n              '<img src=\"'+item.user.profile_image_url+'\" alt=\"'+item.user.screen_name+'\" class=\"d-card-userPhoto\">' +\n              '<p class=\"d-card-userName\">@'+item.user.screen_name+'</p>' +\n              '<p class=\"d-card-likeCount\">'+item.favorite_count+'</p>' +\n            '</div>' +\n          '</div>';\n    return node;\n  },\n\n  getInstagram: function (item, initial = false) {\n    var anim = 'anim-flip-left';\n    if(initial) anim = 'anim-flip';\n\n    var node = document.createElement('li');\n    node.innerHTML = '<div class=\"d-card d-card--instagram '+anim+'\">' +\n            '<img src=\"'+item.image_url+'\" alt=\"\" class=\"d-card-photo\">' +\n            '<div class=\"d-card-user\">' +\n              '<img src=\"'+item.user.profile_image_url+'\" alt=\"'+item.user.screen_name+'\" class=\"d-card-userPhoto\">' +\n              '<p class=\"d-card-userName\">@'+item.user.screen_name+'</p>' +\n              '<p class=\"d-card-likeCount\">'+item.favorite_count+'</p>' +\n            '</div>' +\n          '</div>';\n    return node;\n  },\n\n  getPost: function () {\n    return app.bulk.shift();\n  },\n\n  getBulkLength: function () {\n    return app.bulk.length;\n  },\n\n  preloadImages: function (images, callback) {\n    var count = images.length;\n    if(count === 0) {\n        callback();\n    }\n\n    var loaded = 0;\n    for (var i = 0; i < count; i++) {\n      var img = new Image(); \n      img.src = images[i];\n      img.onload = function () {\n        loaded++;\n        if(loaded === count) {\n          callback();\n        }\n      }\n    }\n  }\n};\n\napp.init();"]}