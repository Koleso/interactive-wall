{"version":3,"sources":["../../src/js/global.js"],"names":[],"mappings":"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","file":"global.babel.js","sourcesContent":["/*\r\n*\r\n* Project:    Interactive wall\r\n* Author:     David Kolinek - www.davidkolinek.cz\r\n* E-mail:     david.kolinek@gmail.com\r\n*\r\n* open /Applications/Google\\ Chrome\\ Canary.app --args --allow-file-access-from-files/Applications/Google\\ Chrome\\ Canary.app/Contents/MacOS/Google\\ Chrome\\ Canary --args --allow-file-access-from-files\r\n* \r\n*/\r\n\r\nvar app = {\r\n  // Cons\r\n  w: null,\r\n  itemW: null,\r\n  initialCount: null,\r\n\r\n  // Data\r\n  bulk: null,\r\n  rendered: [],\r\n  lastRowFirst: false,\r\n\r\n  init: function () {\r\n    this.w = window.innerWidth;\r\n    this.itemW = 350;\r\n    this.initialCount = parseInt(this.w / this.itemW);\r\n\r\n    app.loadBulk(\"bulk.json\");\r\n  },\r\n\r\n  loadBulk: function (file) {\r\n    var request = new XMLHttpRequest();\r\n    request.open('GET', file, true);\r\n\r\n    request.onload = function() {\r\n      var data = JSON.parse(request.responseText);\r\n      for(var key in data) {\r\n        if(data.hasOwnProperty(key)) {\r\n            app.bulk = data[key];\r\n            app.loadWall();\r\n        }\r\n      }\r\n    };\r\n    request.send();\r\n  },\r\n\r\n  loadWall: function () {\r\n    // Initial load\r\n    for (var i = 0; i < this.initialCount*2; i++) {\r\n      app.loadPost(app.getPost(), true, i);\r\n    }\r\n\r\n    // Fake loading\r\n    setTimeout(function() {\r\n      var loading = document.getElementById('d-loading');\r\n      loading.classList.add('d-fade');\r\n      setTimeout(function(){\r\n        loading.parentNode.removeChild(loading);\r\n      }, 500);\r\n\r\n      var elementsTop = document.querySelectorAll(\"#d-row--top li\");\r\n      var elementsBottom = document.querySelectorAll(\"#d-row--bottom li\");\r\n\r\n      Array.prototype.forEach.call(elementsTop, function(el, i){\r\n        setTimeout(function(){\r\n          el.classList.add('d-show');\r\n        }, i*50);\r\n      });\r\n\r\n      setTimeout(function () {\r\n        Array.prototype.forEach.call(elementsBottom, function(el, i){\r\n          setTimeout(function(){\r\n            el.classList.add('d-show');\r\n          }, i*50);\r\n        });\r\n      }, 50);\r\n    }, 3000);\r\n\r\n    // Load new posts\r\n    setTimeout(function() {\r\n      app.loadNextItem();\r\n    }, 3000);\r\n  },\r\n\r\n  loadNextItem: function () {\r\n    // Random generator for displaying new posts\r\n    setTimeout(function() {\r\n      app.loadPost(app.getPost(), false); // Load only 1 item\r\n      if(app.getBulkLength() > 0) {\r\n        app.loadNextItem();\r\n      }\r\n    }, Math.floor(Math.random()*4+2)*1000);\r\n  },\r\n\r\n  loadPost: function (item, initial = false) {\r\n    var images = [item.user.profile_image_url];\r\n    if(item.image_url) {\r\n      images.push(item.image_url);\r\n    }\r\n\r\n    app.preloadImages(images, function () {\r\n      app.renderPost(item, initial);\r\n    });\r\n  },\r\n\r\n  renderPost: function (item, initial = false) {\r\n    var newPost = app.getPostTemplate(item, initial);\r\n    console.log(newPost);\r\n    if(app.lastRowFirst) {\r\n      var parent = document.getElementById(\"d-row--bottom\");\r\n    } else {\r\n      var parent = document.getElementById(\"d-row--top\");\r\n    }\r\n    parent.insertBefore(newPost, parent.firstChild);\r\n    app.lastRowFirst = !app.lastRowFirst;\r\n\r\n    if(!initial) {\r\n      setTimeout(function () {\r\n        newPost.classList.add(\"d-show\");\r\n      }, 16);\r\n\r\n      if(app.rendered.unshift(newPost) > this.initialCount*2+4) {\r\n        var last = app.rendered.pop();\r\n        last.parentNode.removeChild(last);\r\n      };\r\n    }\r\n\r\n    return newPost;\r\n  },\r\n\r\n  getPostTemplate: function (item, initial = false) {\r\n    if(item.network === \"instagram\") {\r\n      return app.getInstagram(item, initial);\r\n    } else if(item.network === \"twitter\") {\r\n      return app.getTweet(item, initial);\r\n    }\r\n  },\r\n\r\n  getTweet: function (item, initial = false) {\r\n    var anim = 'anim-flip-left';\r\n    if(initial) anim = 'anim-flip';\r\n\r\n    var node = document.createElement('li');\r\n    node.innerHTML = '<div class=\"d-card d-card--twitter '+anim+'\">' +\r\n            '<p class=\"d-card-title\">Twitter</p>' +\r\n            '<p class=\"d-card-message\">'+item.text.replace(/(^|\\s)(#[a-z\\d-]+)/ig, \"$1<span class='d-hash'>$2</span>\")+'</p>' +\r\n            '<div class=\"d-card-user\">' +\r\n              '<img src=\"'+item.user.profile_image_url+'\" alt=\"'+item.user.screen_name+'\" class=\"d-card-userPhoto\">' +\r\n              '<p class=\"d-card-userName\">@'+item.user.screen_name+'</p>' +\r\n              '<p class=\"d-card-likeCount\">'+item.favorite_count+'</p>' +\r\n            '</div>' +\r\n          '</div>';\r\n    return node;\r\n  },\r\n\r\n  getInstagram: function (item, initial = false) {\r\n    var anim = 'anim-flip-left';\r\n    if(initial) anim = 'anim-flip';\r\n\r\n    var node = document.createElement('li');\r\n    node.innerHTML = '<div class=\"d-card d-card--instagram '+anim+'\">' +\r\n            '<img src=\"'+item.image_url+'\" alt=\"\" class=\"d-card-photo\">' +\r\n            '<div class=\"d-card-user\">' +\r\n              '<img src=\"'+item.user.profile_image_url+'\" alt=\"'+item.user.screen_name+'\" class=\"d-card-userPhoto\">' +\r\n              '<p class=\"d-card-userName\">@'+item.user.screen_name+'</p>' +\r\n              '<p class=\"d-card-likeCount\">'+item.favorite_count+'</p>' +\r\n            '</div>' +\r\n          '</div>';\r\n    return node;\r\n  },\r\n\r\n  getPost: function () {\r\n    return app.bulk.shift();\r\n  },\r\n\r\n  getBulkLength: function () {\r\n    return app.bulk.length;\r\n  },\r\n\r\n  preloadImages: function (images, callback) {\r\n    var count = images.length;\r\n    if(count === 0) {\r\n        callback();\r\n    }\r\n\r\n    var loaded = 0;\r\n    for (var i = 0; i < count; i++) {\r\n      var img = new Image(); \r\n      img.src = images[i];\r\n      img.onload = function () {\r\n        loaded++;\r\n        if(loaded === count) {\r\n          callback();\r\n        }\r\n      }\r\n    }\r\n  }\r\n};\r\n\r\napp.init();"]}